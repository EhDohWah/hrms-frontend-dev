// ============================================
// ANT DESIGN TABLE OVERRIDES
// ============================================
// Professional table styling for HRMS
// Uses design tokens from utils/_variables.scss

// ===========================================
// BASE TABLE WRAPPER
// ===========================================
.ant-table-wrapper {
  .ant-table {
    font-family: $font-family-primary;
    font-size: $font-size-14;
    color: $table-cell-color;
    background: $white;
    border-radius: 0;

    // Remove default border
    &.ant-table-bordered {
      border: none;
    }
  }
}

// ===========================================
// TABLE CONTAINER
// ===========================================
// Note: Do NOT hide ::before/::after - they are used by Ant Design for fixed column shadows
.ant-table-container {
  border: 1px solid $table-border-color;
  border-radius: 2px;
}

// ===========================================
// TABLE HEADER STYLES
// ===========================================
.ant-table-thead > tr > th {
  background: $table-header-bg;
  color: $table-header-color;
  font-weight: $font-weight-semibold;
  font-size: $font-size-14;
  padding: $table-cell-padding;
  border-bottom: 1px solid $table-border-color;
  transition: background 0.2s ease;
  // Prevent awkward header text wrapping
  white-space: nowrap;

  // Remove column separators for cleaner look
  &::before {
    display: none !important;
  }
}

// ===========================================
// HEADER TEXT ELLIPSIS FOR LONG TITLES
// ===========================================
// Use .table-header-ellipsis class on tables with many columns
.table-header-ellipsis {
  .ant-table-thead > tr > th {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;

    .ant-table-column-title {
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
    }
  }
}

// ===========================================
// COMPACT TABLE HEADERS (for tables with many columns)
// ===========================================
.table-compact-headers {
  .ant-table-thead > tr > th {
    padding: 10px 12px;
    font-size: 13px;
  }

  .ant-table-tbody > tr > td {
    padding: 10px 12px;
    font-size: 13px;
  }
}

// ===========================================
// RESPONSIVE TABLE HEADERS
// ===========================================
// Allow word break for very long single-word headers
.ant-table-column-title {
  word-break: keep-all;
  hyphens: none;
}

// Sorting header states
.ant-table-thead th.ant-table-column-has-sorters {
  cursor: pointer;

  &:hover {
    background: darken($table-header-bg, 2%);
  }
}

.ant-table-thead th.ant-table-column-sort {
  background: darken($table-header-bg, 3%);
}

// Sorter icon colors
.ant-table-column-sorter-up.active,
.ant-table-column-sorter-down.active {
  color: $primary;
}

.ant-table-column-sorter {
  color: rgba(0, 0, 0, 0.25);
}

// ===========================================
// TABLE BODY STYLES
// ===========================================
// Note: Do NOT set background here - let Ant Design handle it for fixed columns
.ant-table-tbody > tr > td {
  padding: $table-cell-padding;
  color: $table-cell-color;
  font-size: $font-size-14;
  border-bottom: 1px solid $table-border-color;
}

// Last row - keep bottom border
.ant-table-tbody > tr:last-child > td {
  border-bottom: 1px solid $table-border-color;
}

// ===========================================
// ROW HOVER STATE
// ===========================================
// Non-fixed columns hover
.ant-table-tbody > tr:hover > td {
  background-color: $table-row-hover-bg;
}

// ===========================================
// ROW SELECTION
// ===========================================
// IMPORTANT: All selection colors must be OPAQUE for fixed columns
// Using transparent rgba colors will cause "see-through" effect when scrolling

.ant-table-tbody > tr.ant-table-row-selected > td {
  background-color: $table-selection-bg;
}

.ant-table-tbody > tr.ant-table-row-selected:hover > td {
  background-color: $table-selection-hover-bg;
}

// ===========================================
// CHECKBOX STYLING
// ===========================================
.ant-checkbox-inner {
  width: $checkbox-size;
  height: $checkbox-size;
  border-radius: $checkbox-border-radius;
  border: 1px solid #d9d9d9;
  background: $white;
  transition: all 0.2s ease;
}

.ant-checkbox-checked .ant-checkbox-inner {
  background-color: $primary;
  border-color: $primary;
}

.ant-checkbox-indeterminate .ant-checkbox-inner::after {
  background-color: $primary;
}

// Checkbox hover
.ant-checkbox-wrapper:hover .ant-checkbox-inner,
.ant-checkbox:hover .ant-checkbox-inner {
  border-color: $primary;
}

// Selection column
.ant-table-selection-column {
  padding-left: 16px !important;
  padding-right: 8px !important;
}

.ant-table-thead .ant-table-selection-column {
  background: $table-header-bg;
}

// ===========================================
// FIXED COLUMN STYLES
// ===========================================
// CRITICAL: Fixed columns use position:sticky and MUST have OPAQUE backgrounds
// If backgrounds are transparent, content will show through when scrolling

// Fixed column body cells - MUST be opaque white
.ant-table-tbody > tr > td.ant-table-cell-fix-left,
.ant-table-tbody > tr > td.ant-table-cell-fix-right {
  background-color: $white !important;
}

// Fixed column headers - MUST be opaque
.ant-table-thead > tr > th.ant-table-cell-fix-left,
.ant-table-thead > tr > th.ant-table-cell-fix-right {
  background-color: $table-header-bg !important;
}

// Fixed columns on hover - MUST be opaque
.ant-table-tbody > tr:hover > td.ant-table-cell-fix-left,
.ant-table-tbody > tr:hover > td.ant-table-cell-fix-right {
  background-color: $table-row-hover-bg !important;
}

// Fixed columns when selected - MUST be opaque
.ant-table-tbody > tr.ant-table-row-selected > td.ant-table-cell-fix-left,
.ant-table-tbody > tr.ant-table-row-selected > td.ant-table-cell-fix-right {
  background-color: $table-selection-bg !important;
}

// Fixed columns when selected AND hovered - MUST be opaque
.ant-table-tbody > tr.ant-table-row-selected:hover > td.ant-table-cell-fix-left,
.ant-table-tbody > tr.ant-table-row-selected:hover > td.ant-table-cell-fix-right {
  background-color: $table-selection-hover-bg !important;
}

// ===========================================
// ACTION COLUMN
// ===========================================
.action-icon {
  display: inline-flex;
  align-items: center;
  gap: 8px;

  a {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 4px;
    color: $gray-500;
    transition: all 0.2s ease;

    &:hover {
      background: $light-300;
      color: $primary;
    }

    i {
      font-size: 16px;
    }
  }

  // Delete action
  a[title="Delete Employee"],
  a.delete-action {
    &:hover {
      background: rgba($danger, 0.1);
      color: $danger;
    }
  }
}

// ===========================================
// BADGE STYLING IN TABLES
// ===========================================
.ant-table-tbody {
  // Organization badges
  .badge-primary {
    background: $primary;
    color: $white;
    font-weight: $font-weight-medium;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
  }

  .badge-soft-primary {
    background: rgba($primary, 0.1);
    color: $primary;
    font-weight: $font-weight-semibold;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
  }
}

// Status badge
.ant-badge-status {
  .ant-badge-status-dot {
    width: 6px;
    height: 6px;
  }

  .ant-badge-status-text {
    color: $table-cell-color;
    font-size: $font-size-14;
  }
}

// ===========================================
// ANT DESIGN TAGS
// ===========================================
.ant-tag {
  font-size: 12px;
  border: 0;
  border-radius: 4px;
  padding: 2px 8px;
  line-height: 20px;
}

// ===========================================
// TABLE SCROLLBAR
// ===========================================
.ant-table-body {
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;

    &:hover {
      background: #a8a8a8;
    }
  }
}

// ===========================================
// SORTED COLUMN BACKGROUND
// ===========================================
// Keep sorted column backgrounds minimal - let Ant Design handle complex states

// ===========================================
// EMPTY STATE
// ===========================================
.ant-table-placeholder {
  .ant-empty {
    margin: 32px 0;
  }

  .ant-empty-description {
    color: $gray-500;
  }
}

// ===========================================
// LOADING STATE
// ===========================================
.ant-table-loading {
  .ant-spin {
    color: $primary;
  }
}

// ===========================================
// COLUMN TITLE
// ===========================================
.ant-table-column-title {
  color: $table-header-color;
  font-weight: $font-weight-semibold;
}

// ===========================================
// EXPANDABLE ROW
// ===========================================
.ant-table-row-expand-icon {
  border-radius: 2px;

  &:hover {
    color: $primary;
  }
}

// ===========================================
// TABLE AVATAR STYLING
// ===========================================
.table-avatar {
  display: flex;
  align-items: center;
  gap: 12px;

  .avatar-name {
    font-size: $font-size-14;
    color: $gray-600;
    font-weight: $font-weight-normal;
  }

  a {
    color: $gray-800;
    font-size: $font-size-14;
    font-weight: $font-weight-medium;

    &:hover {
      color: $primary;
    }
  }
}

// ===========================================
// PRODUCT IMAGE IN TABLE
// ===========================================
.ant-table-tbody tr td .product-img img {
  min-width: 40px;
  width: 40px;
  height: 40px;
  border-radius: $border-radius;
  object-fit: cover;
}

// ===========================================
// POPOVER STYLING
// ===========================================
.ant-popover-inner {
  max-width: 276px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 6px;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
}

.ant-popover-title {
  padding: 12px 16px;
  font-weight: $font-weight-semibold;
  background-color: $light-300;
  border-bottom: 1px solid $table-border-color;
  border-radius: 6px 6px 0 0;
}

.ant-popover-inner-content {
  padding: 12px 16px;
  color: $dark;
}

// ===========================================
// DATATABLES INTEGRATION (if used)
// ===========================================
.datatableIndex .ant-pagination {
  display: none;
}

.dataTables_length {
  margin: 0 12px 15px;
}
